datasource db {
    provider = "sqlite"
    url      = "file:./db/database.sqlite3"
}

generator client {
    provider = "prisma-client-js"
}

//ユーザーの為のテーブル
model User {
    id           String @id
    username     String
    accessToken  String
    refreshToken String
    time         BigInt
}

model Token {
    id    String
    token String @id
}

model Email {
    id      String @id
    content String
}

model Avatar {
    id      String @id
    content String
}

//重要人物システム用
model DangerousPeople {
    userId      String @id
    name        String
    type        String
    title       String
    description String
    time        DateTime
}

model DangerousPeopleSubAccount {
    userId String @id
    mainId String
}

model DangerousPeopleScore {
    userId  String
    content String

    @@id([userId, content])
}

model DangerousPeopleTag {
    userId  String
    content String

    @@id([userId, content])
}

//フレンド募集用
model Friend {
    userId      String @id
    username    String
    description String
    nsfw        Boolean
    time        DateTime
}

model FriendTag {
    userId  String
    content String

    @@id([userId, content])
}

//登録サーバーの為のテーブル
model Guild {
    guildId     String @id

    name        String
    invite      String
    icon        String?
    banner      String?

    category    String
    description String
}

model GuildReview {
    userId  String
    guildId String
    star    Int
    content String?

    @@id([userId, guildId])
}

model GuildTag {
    guildId String
    tag     String

    @@id([guildId, tag])
}

model GuildTmp {
    guildId     String @id

    name        String
    invite      String
    icon        String?
    banner      String?
}

model GuildNSFW {
    id      String @id
    content Boolean
}

model GuildBump {
    id   String @id
    time BigInt
}

model GuildLevel {
    guildId String @id
    level   BigInt
    point   BigInt
}

model GuildBlackList {
    guildId String @id
}

model BumpCounter {
    guildId String @id
    count   Int
}

//アクティブレートの為のテーブル
model GuildNewMember {
    guildId String
    count   Int
    date    DateTime

    @@id([guildId, date])
}

model GuildNewMessage {
    guildId String
    count   Int
    date    DateTime

    @@id([guildId, date])
}

model GuildVcMemberSum {
    guildId String
    userId  String
    date    DateTime

    @@id([guildId, userId, date])
}

model GuildVcMemberUpperTwo {
    guildId String
    date    DateTime

    count   Int

    @@id([guildId, date])
}

model GuildActiveRate {
    guildId String @id
    content BigInt
}

//レベル関係のアーカイブテーブル
model ArchiveLevelRanking {
    guildId String @id
    content BigInt
}

model ArchiveActiveRateRanking {
    guildId String @id
    content BigInt
}

model ArchiveActiveRateMax {
    guildId String @id
    content BigInt
}

//色々なパネル用
model RankingPanelRate {
    guildId   String @id
    channelId String
    messageId String
}

model RankingPanelLevel {
    guildId   String @id
    channelId String
    messageId String
}

model DangerousPeopleScorePanel {
    guildId   String @id
    channelId String
    messageId String
}

//サーバーごとの設定用
model ActingOwner {
    guildId String @id
    userId  String
}

model BumpNotice {
    guildId String @id
    content Boolean
}

model DangerousPeopleNoticeChannel {
    guildId   String @id
    channelId String
}

model DangerousPeopleBanBasis {
    guildId String @id
    score   Int
}

//営業先
model Sales {
    guildId String @id
    userId  String
    time    DateTime
}
